{% extends "layout.html" %}

{% block title %}
Blog dashboard
{% endblock %}

{% block main %}
<h1 class="mb-4">Blog Dashboard</h1>

<h2>Welcome, {{ user.username }}!</h2>

<form method="POST" action="{{ url_for('dashboard') }}" class="mb-4">
    <input type= "hidden" name="write_new" value="True">
    <button type="submit" class="btn btn-primary">Write New Post</button>
</form>
<a href="{{ url_for('bio', user_name=user.username) }}" class="btn btn-secondary">My Bio</a>

<h2 class="mb-4">Your Blog Posts</h2>
{% for post in posts %}
<div class="card mb-4">
    <div class="card-body">
        
            <h5 class="card-title">{{ post.title }}</h5>
            <h6 class="card-subtitle mb-2 text-muted">Created on {{ post.timestamp }}</h6>
            <div class="card-text post-body">{{ post.body|markdown|safe }}</div>
            <form method="POST" onsubmit="return confirmDelete()" action="{{ url_for('delete_post', post_id=post.id) }}">
                <button type="submit" class="btn btn-danger">Delete Post</button>
            </form>
    </div>
</div>
{% endfor %}

<script>
function confirmDelete() {
    return confirm("Are you sure you want to delete this?");
}
</script>

{% endblock %}